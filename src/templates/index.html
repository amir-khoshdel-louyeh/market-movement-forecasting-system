<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>MMFS â€“ Web Candles</title>
  <script src="https://cdn.plot.ly/plotly-2.26.0.min.js"></script>
  <style>
    :root {
      --bg-primary: #f5f7fa;
      --bg-secondary: #fff;
      --bg-tertiary: #f7f8fb;
      --text-primary: #1f2937;
      --text-secondary: #666;
      --border-color: #eee;
      --border-dark: #d5d7df;
      --hover-bg: #f0f2f7;
      --skeleton-light: #f0f0f0;
      --skeleton-mid: #e0e0e0;
    }
    
    body.dark-mode {
      --bg-primary: #1a1a1a;
      --bg-secondary: #2a2a2a;
      --bg-tertiary: #333333;
      --text-primary: #e0e0e0;
      --text-secondary: #a0a0a0;
      --border-color: #444;
      --border-dark: #555;
      --hover-bg: #404040;
      --skeleton-light: #333333;
      --skeleton-mid: #404040;
    }
    
    * { box-sizing: border-box; }
    html, body { width: 100%; height: 100%; margin: 0; padding: 0; }
    body { font-family: system-ui, -apple-system, Segoe UI, Roboto, sans-serif; display: flex; flex-direction: column; background: var(--bg-primary); color: var(--text-primary); transition: background-color 0.3s, color 0.3s; }
    header { padding: 12px 16px; border-bottom: 1px solid var(--border-color); background: var(--bg-secondary); display: flex; gap: 12px; align-items: center; flex-wrap: wrap; flex-shrink: 0; }
    .layout { display: flex; flex: 1; min-height: 0; }
    #sidebar { width: 140px; border-right: 1px solid var(--border-color); background: var(--bg-tertiary); padding: 10px 8px; display: flex; flex-direction: column; gap: 8px; overflow-y: auto; flex-shrink: 0; }
    #chart { flex: 1; min-width: 0; background: var(--bg-secondary); overflow: auto; }
    input, select, button { padding: 6px 8px; border: 1px solid var(--border-dark); border-radius: 4px; background: var(--bg-secondary); color: var(--text-primary); }
    label { font-size: 0.9rem; }
    .tool-btn { width: 100%; text-align: left; border: 1px solid var(--border-dark); background: var(--bg-secondary); border-radius: 6px; cursor: pointer; font-size: 0.9rem; padding: 8px 10px; transition: all 0.2s; color: var(--text-primary); }
    .tool-btn:hover { background: var(--hover-bg); }
    .tool-btn.active { border-color: #2563eb; background: #e8f0fe; }
    body.dark-mode .tool-btn.active { background: rgba(37, 99, 235, 0.2); }
    .nav-link { text-decoration: none; color: var(--text-primary); padding: 6px 12px; border-radius: 4px; margin-left: auto; }
    .nav-link:hover { background: var(--hover-bg); }
    .theme-toggle { background: none; border: none; font-size: 1.2rem; cursor: pointer; padding: 6px 8px; border-radius: 4px; transition: all 0.2s; color: var(--text-primary); }
    .theme-toggle:hover { background: var(--hover-bg); }
    
    /* Skeleton Loader Styles */
    .skeleton { background: linear-gradient(90deg, var(--skeleton-light) 25%, var(--skeleton-mid) 50%, var(--skeleton-light) 75%); background-size: 200% 100%; animation: skeleton-loading 1.5s infinite; }
    @keyframes skeleton-loading { 0% { background-position: 200% 0; } 100% { background-position: -200% 0; } }
    #skeleton-container { display: flex; flex-direction: column; gap: 8px; padding: 16px; height: 100%; }
    .skeleton-bar { height: 60px; border-radius: 4px; }
    .skeleton-chart { flex: 1; border-radius: 4px; }
  </style>
</head>
<body>
<header>
  <label>Symbol
    <select id="symbol">
      <option value="btcusdt" {% if symbol == 'btcusdt' %}selected{% endif %}>BTCUSDT</option>
      <option value="ethusdt" {% if symbol == 'ethusdt' %}selected{% endif %}>ETHUSDT</option>
      <option value="bnbusdt" {% if symbol == 'bnbusdt' %}selected{% endif %}>BNBUSDT</option>
      <option value="solusdt" {% if symbol == 'solusdt' %}selected{% endif %}>SOLUSDT</option>
      <option value="adausdt" {% if symbol == 'adausdt' %}selected{% endif %}>ADAUSDT</option>
    </select>
  </label>
  <label>Interval
    <select id="interval">
      <option value="1m" {% if interval == '1m' %}selected{% endif %}>1m</option>
      <option value="5m" {% if interval == '5m' %}selected{% endif %}>5m</option>
      <option value="15m" {% if interval == '15m' %}selected{% endif %}>15m</option>
      <option value="30m" {% if interval == '30m' %}selected{% endif %}>30m</option>
      <option value="1h" {% if interval == '1h' %}selected{% endif %}>1h</option>
      <option value="4h" {% if interval == '4h' %}selected{% endif %}>4h</option>
      <option value="1d" {% if interval == '1d' %}selected{% endif %}>1d</option>
    </select>
  </label>
  <span id="status" style="margin-left:8px;color:var(--text-secondary);font-size:0.9rem"></span>
  <button id="theme-toggle" class="theme-toggle" title="Toggle dark mode">ðŸŒ™</button>
  <a href="/ml" class="nav-link">ðŸ¤– ML Dashboard</a>
</header>
<div class="layout">
  <aside id="sidebar">
    <button class="tool-btn" id="btn-zoom-in">Zoom In</button>
    <button class="tool-btn" id="btn-zoom-out">Zoom Out</button>
    <button class="tool-btn" id="btn-zoom-box">Zoom Box</button>
    <button class="tool-btn" id="btn-pan">Pan</button>
    <button class="tool-btn" id="btn-select">Box Select</button>
    <button class="tool-btn" id="btn-lasso">Lasso</button>
    <button class="tool-btn" id="btn-reset">Reset Axes</button>
  </aside>
  <div id="chart">
    <div id="skeleton-container">
      <div class="skeleton skeleton-bar"></div>
      <div class="skeleton skeleton-chart"></div>
    </div>
  </div>
</div>
<script src="/static/js/app.js"></script>
</body>
</html>
